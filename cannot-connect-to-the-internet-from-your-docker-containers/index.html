
<!doctype html>
<!-- BEGIN _layouts/default.html -->
<html>
	<head>
		<meta charset="utf-8">
		
		<meta content="Ever experienced problem connecting to the internet from a docker container? Let's fix it!" name="description">
		<meta content="Alessandro Nadalin" name="author">
		
		<title>Cannot connect to the internet from your Docker containers?</title>
		<meta name="google-site-verification" content="dSNHLHJFQzKASjN8qHJisk2XLkKqbF_ilGSj9bscwKs" />
		<link href="/favicon.png" rel="icon">
		<link href="/stylesheets/screen.css" rel="stylesheet">
		<link href="/atom.xml" rel="alternate" title="Alessandro Nadalin" type="application/atom+xml">
		<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="/MyFontsWebfontsKit.css">

		<meta name="twitter:card" content="summary" />
		<meta name="twitter:creator" content="@_odino_" />
		<meta property="og:url" content="https://odino.org/cannot-connect-to-the-internet-from-your-docker-containers/" />
		<meta property="og:title" content="Cannot connect to the internet from your Docker containers?" />
		<meta property="og:description" content="Ever experienced problem connecting to the internet from a docker container? Let's fix it!" />
		
	</head>
	<body>
		<div class="wrap">
			<header>
				<div class="navi">
					<ul>
                        <li><a href="/"><i class="icon-home icon-large"></i> Home</a></li>
                        <li><a href="/about"><i class="icon-user icon-large"></i> About</a></li>
                        <li><a href="/conferences"><i class="icon-group icon-large"></i> Conferences</a></li>
                        <li><a href="/archives"><i class="icon-briefcase icon-large"></i> Archives</a></li>
                        <li><a href="/atom.xml"><i class="icon-rss icon-large"></i> RSS</a></li>
					</ul>
				</div>
			</header>
			<!-- BEGIN _layouts/post.html -->

    <header>
        <h1><a href="/cannot-connect-to-the-internet-from-your-docker-containers/">Cannot connect to the internet from your Docker containers?</a></h1>
        <time>06 February 2015</time>
        <!-- 
        
        
        
          <br />
          <time>(note: this post was written 6 years ago and might be outdated)</time>
         -->
    </header>
<div class="entry-content "><p>Stuck trying to figure out what&rsquo;s up with
your containers, as they cannot seem to be
able to access the network?</p>

<!-- more -->


<p>Well, that happened to a few of us at
<a href="http://tech.namshi.com">Namshi</a> in the
past couple of days.</p>

<p>The good news is that you can clearly verify
that something is just wrong with Docker by
simply pinging <code>google.com</code> from your host
and a simple container:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ping google.com
</span><span class='line'>PING google.com (173.194.124.7) 56(84) bytes of data.
</span><span class='line'>64 bytes from 173.194.124.7: icmp_req=1 ttl=56 time=11.1 ms
</span><span class='line'>64 bytes from 173.194.124.7: icmp_req=2 ttl=56 time=13.2 ms
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>$ docker run -ti ubuntu ping google.com
</span><span class='line'># BLACK HOLE</span></code></pre></td></tr></table></div></figure>


<p>If you happen to get stuck in this kind of
situation, you might want to look into what
DNS server Docker is actually using to let
your containers resolve onto the internet.</p>

<p>In our case, we realized our firewall was
acting pretty weirdly with Google&rsquo;s public
DNSes (<code>8.8.8.8</code> and <code>8.8.4.4</code>), which happen
to be the default ones Docker is gonna use in
case you don&rsquo;t have anything custom specified
in your <code>resolv.conf</code> and so on.</p>

<p>The issue, overall, was quite easy to circumvent,
as we just told docker to use OpenDNS in our
<code>/etc/default/docker</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Docker Upstart and SysVinit configuration file
</span><span class='line'>
</span><span class='line'># Use DOCKER_OPTS to modify the daemon startup options.
</span><span class='line'>DOCKER_OPTS="--dns 208.67.222.222 --dns 208.67.220.220"</span></code></pre></td></tr></table></div></figure>


<p>Then, you will only need to restart the Docker
demon and everything should be fine:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo service docker restart  
</span><span class='line'>docker stop/waiting
</span><span class='line'>docker start/running, process 26999
</span><span class='line'>
</span><span class='line'>$ docker run ubuntu ping google.com   
</span><span class='line'>PING google.com (173.194.124.2) 56(84) bytes of data.
</span><span class='line'>64 bytes from 173.194.124.2: icmp_seq=1 ttl=55 time=11.4 ms
</span><span class='line'>64 bytes from 173.194.124.2: icmp_seq=2 ttl=55 time=11.2 ms
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>Hope this helps! To be honest we&rsquo;ve googled
around and found out that there might be <a href="https://github.com/docker/docker/issues/490">some</a>
<a href="http://stackoverflow.com/questions/23810845/i-cant-get-docker-containers-to-access-the-internet">other</a>,
<a href="https://github.com/docker/docker/issues/866#issuecomment-19218300">creepier</a>,
issues that might cause the problem, so I&rsquo;d
really hope yours is just as silly as the one
I&rsquo;ve faced.</p>
</div>



<div class="recent entry-content">
  <hr class="divider-cazzuto">
  <h3>
    In the mood for some more reading?
  </h3>
  <ul>
    
      <li><a href="/fwupd-is-the-best-thing-that-ever-happened-to-linux/">fwupd is the best thing that ever happened to Linux</a> (15 April 2021)</li>
    
      <li><a href="/avoid-battery-draining-on-your-linux-flavored-dell-xps/">Avoid battery draining on your Linux-flavored Dell XPS</a> (31 January 2021)</li>
    
      <li><a href="/combining-two-numbers-into-a-unique-one-pairing-functions/">Combining two numbers into a unique one: pairing functions</a> (05 December 2020)</li>
    
      <li><a href="/running-ci-tests-in-kubernetes-through-github-actions/">Running CI tests in Kubernetes through Github Actions</a> (20 March 2020)</li>
    
      <li><a href="/ive-decided-to-make-the-wasec-ebook-free-during-these-trying-times/">I've decided to make the WASEC ebook free during these trying times</a> (20 March 2020)</li>
    
      <li><a href="/local-k8s-development-in-2020/">Local k8s development in 2020</a> (31 December 2019)</li>
    
      <li><a href="/wasec-a-book-about-web-application-security-is-now-available-for-sale/">WASEC, a book about Web Application Security, is now available for sale</a> (25 November 2019)</li>
    
  </ul>
    <p>
      ...or <a href="/archives/">check the archives</a>.
    </p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.0/anchor.min.js"></script>
<script type="text/javascript" />
(function () {
  'use strict';

  anchors.options = {
    placement: 'left',
    visible: 'hover',
    icon: '¶'
  };

  anchors.add('h2');
  anchors.add('h3');
  anchors.add('h4');

})();
</script>

			<footer>
				<center>
	Copyleft <!--[if lte IE 8]><span style="filter: FlipH; -ms-filter: "FlipH"; display: inline-block;"><![endif]--><span style="-moz-transform: scaleX(-1); -o-transform: scaleX(-1); -webkit-transform: scaleX(-1); transform: scaleX(-1); display: inline-block;">©</span><!--[if lte IE 8]></span><![endif]--> 2021 — Alessandro Nadalin
	<address>
	</address>
</center>
			</footer>
		</div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-7407627-3', 'auto');
      ga('send', 'pageview');
	</script>
	
	<script type="application/ld+json">
		{
		"@context": "https://schema.org/",
		"@type": "BlogPosting",
		"mainEntityOfPage": {
			"@type": "WebPage",
			"@id": "https://odino.org/cannot-connect-to-the-internet-from-your-docker-containers/"
		},
		"headline": "Cannot connect to the internet from your Docker containers?",
		"description": "Ever experienced problem connecting to the internet from a docker container? Let's fix it!",
		
		"author": {
			"@type": "Person",
			"name": "Alessandro Nadalin"
		},
		"datePublished": "2015-02-06 00:54:00 +0000"
		}
	</script>
	
	</body>
</html>
<!-- END _layouts/default.html -->
